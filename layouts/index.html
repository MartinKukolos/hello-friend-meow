{{ define "body" }}
    <body class="{{ if .Site.Params.backgroundImage }} background-image" style="background-image: url('{{ .Site.Params.backgroundImage }}');" {{ else }}"{{ end }}>
{{ end }}

{{ define "main" }}
    {{ if eq .Site.Params.frontpageVariant "blog" }}
    <main aria-role="main">
        <div>
            {{ if .Site.Params.Portrait.Path }}
                {{ $cacheKey := print .Site.Params.Portrait.Path (now.Format "Mon, 02 Jan 2006 15:04:05 MST") }}
                {{ with resources.GetRemote .Site.Params.Portrait.Path (dict "key" $cacheKey) }}
                {{ $portrait := .Resize "250x webp q90" }}

                    <img src="data: {{ $portrait.MediaType }};base64, {{ $portrait.Content | base64Encode }}" class="circle" alt="{{ site.Params.Portrait.Alt }}" style="max-width:{{ site.Params.Portrait.MaxWidth }}" />
                {{ end }}
            {{ end }}

            <h1>{{ .Site.Title }}
                {{ if eq .Site.Params.Verified true }}
                <a href="/verified">
                    <svg role="img" style="fill: var(--accent)" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 24 24">
                        <path d="M23.334 11.96c-.713-.726-.872-1.829-.393-2.727.342-.64.366-1.401.064-2.062-.301-.66-.893-1.142-1.601-1.302-.991-.225-1.722-1.067-1.803-2.081-.059-.723-.451-1.378-1.062-1.77-.609-.393-1.367-.478-2.05-.229-.956.347-2.026.032-2.642-.776-.44-.576-1.124-.915-1.85-.915-.725 0-1.409.339-1.849.915-.613.809-1.683 1.124-2.639.777-.682-.248-1.44-.163-2.05.229-.61.392-1.003 1.047-1.061 1.77-.082 1.014-.812 1.857-1.803 2.081-.708.16-1.3.642-1.601 1.302s-.277 1.422.065 2.061c.479.897.32 2.001-.392 2.727-.509.517-.747 1.242-.644 1.96s.536 1.347 1.17 1.7c.888.495 1.352 1.51 1.144 2.505-.147.71.044 1.448.519 1.996.476.549 1.18.844 1.902.798 1.016-.063 1.953.54 2.317 1.489.259.678.82 1.195 1.517 1.399.695.204 1.447.072 2.031-.357.819-.603 1.936-.603 2.754 0 .584.43 1.336.562 2.031.357.697-.204 1.258-.722 1.518-1.399.363-.949 1.301-1.553 2.316-1.489.724.046 1.427-.249 1.902-.798.475-.548.667-1.286.519-1.996-.207-.995.256-2.01 1.145-2.505.633-.354 1.065-.982 1.169-1.7s-.135-1.443-.643-1.96zm-12.584 5.43l-4.5-4.364 1.857-1.857 2.643 2.506 5.643-5.784 1.857 1.857-7.5 7.642z"></path>
                    </svg>
                </a>
                {{ end }}
            </h1>

            {{- with .Site.Params.homeSubtitle }}
                {{ partial "subtitle.html" . }}
            {{- end }}

            {{- with .Site.Params.social }}
                <div>
                    {{ partial "social-icons.html" . }}
                </div>
            {{- end }}
        </div>
    </main>
    {{ end }}

    {{ if eq .Site.Params.frontpageVariant "microblog"}}
    <div class="microblog-header">
        <div>
            {{ if .Site.Params.Portrait.Path }}
                {{ $cacheKey := print .Site.Params.Portrait.Path (now.Format "Mon, 02 Jan 2006 15:04:05 MST") }}
                {{ with resources.GetRemote .Site.Params.Portrait.Path (dict "key" $cacheKey) }}
                {{ $portrait := .Resize "250x webp q90" }}
                    <img src="data: {{ $portrait.MediaType }};base64, {{ $portrait.Content | base64Encode }}" class="circle" alt="{{ site.Params.Portrait.Alt }}" style="width:80px; height:80px" />
                {{ end }}
            {{ end }}
        </div>
        <div>
            <h2>{{ .Site.Title }}
            </h2>
        </div>
    </div>
    <div class="microblog">
        {{ range where .Site.Pages.ByDate.Reverse "Type" .Site.Params.microblogDefaultPostType  }}
            <div class="microblog-item">
                <div class="microblog-content">
                    {{ .Title }}
                </div>
                <div>
                    <small>
                        <a href="{{ .Permalink }}">{{ .Date.Format "Mon, 02 Jan 2006 15:04:05 MST" }}</a>
                    </small>
                </div>
            </div>
        {{ end }}
    </div>
    {{ end }}
{{ end }}
